{"ast":null,"code":"import _slicedToArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{UserContext}from'../../App';import{Link}from\"react-router-dom\";function Subscriber(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;useEffect(function(){fetch('http://localhost:1000/subscriberPost',{headers:{\"Authorization\":\"Hello \"+localStorage.getItem('jwt')}}).then(function(res){return res.json();}).then(function(result){console.log(result);setData(result.posts);});},[]);var unlikePost=function unlikePost(id){fetch(\"http://localhost:1000/unlike\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem('jwt')},body:JSON.stringify({postsId:id})}).then(function(res){return res.json();}).then(function(result){console.log(result);var newData=data.map(function(item){if(item._id==result._id){return result;}else{return item;}});setData(newData);}).catch(function(err){console.log(err);});};var likePost=function likePost(id){fetch(\"http://localhost:1000/like\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem('jwt')},body:JSON.stringify({postsId:id})}).then(function(res){return res.json();}).then(function(result){console.log(result);var newData=data.map(function(item){if(item._id==result._id){return result;}else{return item;}});setData(newData);}).catch(function(err){console.log(err);});};var commentPost=function commentPost(text,postsId){fetch(\"http://localhost:1000/comment\",{method:'put',headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem('jwt')},body:JSON.stringify({postsId:postsId,text:text})}).then(function(res){return res.json();}).then(function(result){console.log(result);var newData=data.map(function(item){if(item._id==result._id){return result;}else{return item;}});setData(newData);}).catch(function(err){console.log(err);});};var deletePost=function deletePost(postId){fetch(\"http://localhost:1000/deletepost/\".concat(postId),{method:\"delete\",headers:{Authorization:\"Hello \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);var newData=data.filter(function(item){return item._id!==result._id;});setData(newData);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"home\"},data.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"card home-card\",key:item._id},/*#__PURE__*/React.createElement(\"h5\",{style:{padding:\"5px\"}},/*#__PURE__*/React.createElement(Link,{to:item.postedbyId._id!==state._id?\"/profile/\"+item.postedbyId._id:\"/profile/\"+item.postedbyId._id},item.postedbyId.name),\" \",item.postedbyId._id==state._id&&/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",style:{float:\"right\"},onClick:function onClick(){return deletePost(item._id);}},\"delete\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.photo}),/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},item.likes.includes(state._id)?/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",onClick:function onClick(){unlikePost(item._id);}},\"thumb_down\"):/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",onClick:function onClick(){likePost(item._id);}},\"thumb_up\"),/*#__PURE__*/React.createElement(\"h6\",null,item.likes.length,\" likes\"),/*#__PURE__*/React.createElement(\"h4\",null,item.title),/*#__PURE__*/React.createElement(\"p\",null,item.body),item.comments.map(function(record){return/*#__PURE__*/React.createElement(\"h6\",{key:record._id},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:'500'}},record.postedbyId.name),\" \",record.text);}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();commentPost(e.target[0].value,item._id);console.log(e.target[0].value);}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"comment something\"})))));}));}export default Subscriber;","map":{"version":3,"sources":["D:/Project/Picture Gallery/Frontend/picgallery/src/Component/Pages/subscriberPost.js"],"names":["React","useState","useEffect","useContext","UserContext","Link","Subscriber","data","setData","state","dispatch","fetch","headers","localStorage","getItem","then","res","json","result","console","log","posts","unlikePost","id","method","body","JSON","stringify","postsId","newData","map","item","_id","catch","err","likePost","commentPost","text","deletePost","postId","Authorization","filter","padding","postedbyId","name","float","photo","likes","includes","length","title","comments","record","fontWeight","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React,{useState, useEffect, useContext} from 'react'\r\nimport { UserContext } from '../../App'\r\nimport {Link} from \"react-router-dom\"\r\n\r\nfunction Subscriber() {\r\n    const [data,setData] = useState([])\r\n    const {state, dispatch}= useContext(UserContext)\r\n    useEffect(() => {\r\n        fetch('http://localhost:1000/subscriberPost',{\r\n            headers:{\r\n                \"Authorization\":\"Hello \" + localStorage.getItem('jwt')\r\n            }\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            setData(result.posts)\r\n        })\r\n    }, [])\r\n\r\n    const unlikePost = (id) => {\r\n        fetch(\"http://localhost:1000/unlike\",{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \" + localStorage.getItem('jwt')\r\n            },\r\n            body:JSON.stringify({\r\n                postsId:id\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            const newData  = data.map(item=>{\r\n                if (item._id==result._id){\r\n                    return result\r\n                }else {\r\n                    return item\r\n                }\r\n            })\r\n            setData(newData)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const likePost = (id) => {\r\n        fetch(\"http://localhost:1000/like\",{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \" + localStorage.getItem('jwt')\r\n            },\r\n            body:JSON.stringify({\r\n                postsId:id\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            const newData  = data.map(item=>{\r\n                if (item._id==result._id){\r\n                    return result\r\n                }else {\r\n                    return item\r\n                }\r\n            })\r\n            setData(newData)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const commentPost = (text, postsId) =>{\r\n        fetch(\"http://localhost:1000/comment\",{\r\n            method:'put',\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \" + localStorage.getItem('jwt')\r\n            },\r\n            body:JSON.stringify({\r\n                postsId,\r\n                text\r\n            })\r\n        }).then(res=>res.json()) \r\n        .then(result=>{\r\n            console.log(result)\r\n            const newData  = data.map(item=>{\r\n                if (item._id==result._id){ \r\n                    return result\r\n                }else {\r\n                    return item\r\n                }\r\n            })\r\n            setData(newData)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const deletePost = (postId) =>{\r\n        fetch(`http://localhost:1000/deletepost/${postId}`,{\r\n            method:\"delete\",\r\n            headers:{\r\n                Authorization:\"Hello \"+localStorage.getItem(\"jwt\")\r\n            }\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            const newData = data.filter(item=>{ \r\n                return item._id !== result._id\r\n            })\r\n            setData(newData)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"home\">\r\n            {\r\n                data.map(item=>{\r\n                    return(\r\n                        <div className=\"card home-card\" key={item._id}>\r\n                            <h5 style={{padding:\"5px\"}}><Link to={item.postedbyId._id !== state._id ? \"/profile/\"+item.postedbyId._id : \"/profile/\"+item.postedbyId._id}>{item.postedbyId.name}</Link> {item.postedbyId._id==state._id && <i className=\"material-icons\" style={{float:\"right\"}} onClick={()=>deletePost(item._id)}>delete</i>}</h5>\r\n                            <div className=\"card image\">\r\n                                <img src={item.photo} />\r\n                        \r\n                                <div className=\"card-content\">\r\n                                {item.likes.includes(state._id)?\r\n                                <i className=\"material-icons\" onClick={()=>{unlikePost(item._id)}}>thumb_down</i>:<i className=\"material-icons\" onClick={()=>{likePost(item._id)}}>thumb_up</i>}                                \r\n                                    <h6>{item.likes.length} likes</h6>\r\n                                    <h4>{item.title}</h4>\r\n                                    <p>{item.body}</p>\r\n                                    {\r\n                                        item.comments.map(record=>{\r\n                                            return(\r\n                                                <h6 key={record._id}><span style={{fontWeight:'500'}}>{record.postedbyId.name}</span> {record.text}</h6> \r\n                                            )\r\n                                        })\r\n                                    }\r\n                                    <form onSubmit={(e)=>{\r\n                                        e.preventDefault() \r\n                                        commentPost(e.target[0].value,item._id)\r\n                                        console.log(e.target[0].value)\r\n                                    }}>\r\n                                        <input type=\"text\" placeholder=\"comment something\" />\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Subscriber\r\n"]},"metadata":{},"sourceType":"module"}