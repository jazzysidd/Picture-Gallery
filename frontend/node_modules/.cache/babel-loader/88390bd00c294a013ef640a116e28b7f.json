{"ast":null,"code":"import _slicedToArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useRef,useEffect,useState}from'react';import{Link,useHistory}from\"react-router-dom\";import{UserContext}from'../../App';import M from\"materialize-css\";function Navbar(){var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userDetails=_useState4[0],setuserDetails=_useState4[1];var history=useHistory();var searchModal=useRef(null);useEffect(function(){M.Modal.init(searchModal.current);},[]);var renderList=function renderList(){if(state){return[/*#__PURE__*/React.createElement(\"li\",{key:\"1\"},/*#__PURE__*/React.createElement(\"i\",{\"data-target\":\"modal1\",className:\"large material-icons modal-trigger\",style:{color:\"white\"}},\"search\")),/*#__PURE__*/React.createElement(\"li\",{key:\"2\"},/*#__PURE__*/React.createElement(Link,{to:\"/myfeed\"},\"My Feed\")),/*#__PURE__*/React.createElement(\"li\",{key:\"3\"},/*#__PURE__*/React.createElement(Link,{to:\"/createpost\"},\"Upload Post\")),/*#__PURE__*/React.createElement(\"li\",{key:\"4\"},/*#__PURE__*/React.createElement(Link,{to:\"/followersPage\"},\"Followers Post\")),/*#__PURE__*/React.createElement(\"li\",{key:\"5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn #000000 black\",type:\"submit\",onClick:function onClick(){localStorage.clear();dispatch({type:\"CLEAR\"});history.push('/login');}},\"Logout\"))];}else{return[/*#__PURE__*/React.createElement(\"li\",{key:\"6\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Log-In\")),/*#__PURE__*/React.createElement(\"li\",{key:\"7\"},/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Sign-Up\"))];}};var fetchUser=function fetchUser(query){setSearch(query);fetch(\"http://localhost:1000/search-user\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query:query})}).then(function(res){return res.json();}).then(function(results){setuserDetails(results.user);console.log(results);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"nav-wrapper black\"},/*#__PURE__*/React.createElement(Link,{to:state?\"/\":\"/login\",className:\"brand-logo left text-white\"},\"Picture Gallery\"),/*#__PURE__*/React.createElement(\"ul\",{id:\"nav-mobile\",className:\"right \"},renderList())),/*#__PURE__*/React.createElement(\"div\",{id:\"modal1\",className:\"modal\",ref:searchModal,style:{color:\"black\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"search\"},\"Search User\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"search user\",value:search,onChange:function onChange(e){return fetchUser(e.target.value);}}),/*#__PURE__*/React.createElement(\"ul\",{className:\"collection\"},userDetails.map(function(item){return/*#__PURE__*/React.createElement(Link,{to:item._id!==state._id?'/profile/'+item._id:'/profile',onClick:function onClick(){M.Modal.getInstance(searchModal.current).close();setSearch(\"\");}},/*#__PURE__*/React.createElement(\"li\",{className:\"collection-item\",style:{color:\"black\"}},item.email));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"a\",{className:\"modal-close waves-effect waves-green btn-flat\",onClick:function onClick(){return setSearch(\"\");}},\"Search\")))));}export default Navbar;","map":{"version":3,"sources":["D:/Project/Picture Gallery/Frontend/picgallery/src/Component/Layout/Navbar.js"],"names":["React","useContext","useRef","useEffect","useState","Link","useHistory","UserContext","M","Navbar","state","dispatch","search","setSearch","userDetails","setuserDetails","history","searchModal","Modal","init","current","renderList","color","localStorage","clear","type","push","fetchUser","query","fetch","method","headers","body","JSON","stringify","then","res","json","results","user","console","log","e","target","value","map","item","_id","getInstance","close","email"],"mappings":"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","sourcesContent":["import React,{useContext, useRef, useEffect, useState} from 'react'\r\nimport {Link, useHistory} from \"react-router-dom\"\r\nimport { UserContext } from '../../App'\r\nimport M from \"materialize-css\"\r\n\r\nfunction Navbar() {\r\n    const {state,dispatch}= useContext(UserContext)\r\n    const [search, setSearch] = useState(\"\")\r\n    const [userDetails, setuserDetails] = useState([])\r\n    const history = useHistory()\r\n    const searchModal = useRef(null)\r\n\r\n    useEffect(()=>{\r\n        M.Modal.init(searchModal.current)\r\n    },[])\r\n\r\n    const renderList = () =>{\r\n        if (state){\r\n            return[\r\n                <li key=\"1\"><i data-target=\"modal1\" className=\"large material-icons modal-trigger\" style={{color:\"white\"}}>search</i></li>,\r\n                <li key=\"2\"><Link to=\"/myfeed\">My Feed</Link></li>,\r\n                <li key=\"3\"><Link to=\"/createpost\">Upload Post</Link></li>,\r\n                <li key=\"4\"><Link to=\"/followersPage\">Followers Post</Link></li>,\r\n                <li key=\"5\"><button className=\"btn #000000 black\" type=\"submit\" onClick = {()=>{\r\n                    localStorage.clear()\r\n                    dispatch({type:\"CLEAR\"})\r\n                    history.push('/login')\r\n                }} >Logout</button></li>\r\n            ]\r\n        }else{\r\n            return [\r\n                <li key=\"6\"><Link to=\"/login\">Log-In</Link></li>,\r\n                <li key=\"7\"><Link to=\"/signup\">Sign-Up</Link></li>\r\n            ]\r\n        }\r\n    }\r\n\r\n    const fetchUser = (query) =>{\r\n        setSearch(query)\r\n        fetch(\"http://localhost:1000/search-user\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify({\r\n                query\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(results=>{\r\n            setuserDetails(results.user)\r\n            console.log(results)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n             <nav>\r\n                <div className=\"nav-wrapper black\">\r\n                <Link to={state?\"/\":\"/login\"} className=\"brand-logo left text-white\">Picture Gallery</Link>\r\n                <ul id=\"nav-mobile\" className=\"right \">\r\n                    {renderList()}\r\n                </ul>\r\n                </div>\r\n                <div id=\"modal1\" className=\"modal\" ref={searchModal} style={{color:\"black\"}}>\r\n                    <div className=\"modal-content\">\r\n                        <label htmlFor=\"search\">Search User</label>\r\n                        <input type=\"text\" placeholder=\"search user\" value={search} onChange={(e)=>fetchUser(e.target.value)} />\r\n                        <ul className=\"collection\">\r\n                            {userDetails.map(item=>{\r\n                                return <Link to={item._id !== state._id ? '/profile/'+ item._id:'/profile'} onClick={()=>{M.Modal.getInstance(searchModal.current).close()\r\n                                setSearch(\"\")\r\n                            }}><li className=\"collection-item\" style={{color:\"black\"}}>{item.email}</li></Link>\r\n                            })}\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <a className=\"modal-close waves-effect waves-green btn-flat\" onClick={()=>setSearch(\"\")}>Search</a>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n"]},"metadata":{},"sourceType":"module"}