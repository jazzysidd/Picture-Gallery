{"ast":null,"code":"import _objectSpread from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import{UserContext}from'../../App';function Myprofile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allpics=_useState2[0],setPics=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];// const [url, setUrl]=useState(\"\")\nuseEffect(function(){fetch('http://localhost:1000/mypost',{headers:{\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setPics(result.mypost);});},[]);useEffect(function(){if(image){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"Picture gallery\");data.append(\"cloud_name\",\"siddtechbadal\");fetch(\"https://api.cloudinary.com/v1_1/siddtechbadal/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){fetch(\"http://localhost:1000/updatepic\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({pic:data.url})}).then(function(res){return res.json();}).then(function(result){console.log(result);localStorage.setItem(\"user\",JSON.stringify(_objectSpread(_objectSpread({},state),{},{pic:result.pic})));dispatch({type:\"UPDATEPIC\",payload:result.pic});});}).catch(function(err){console.log(err);});}},[image]);var updatePhoto=function updatePhoto(file){setImage(file);};return/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:\"600px\",margin:'10px auto'}},/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"20px 20px\",borderBottom:\"1px solid grey\"}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{style:{width:'160px',height:\"160px\",borderRadius:\"80px\"},src:state?state.pic:\"loading\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,state?state.name:\"loading\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"110%\"}},/*#__PURE__*/React.createElement(\"h6\",null,allpics.length,\" Post\"),/*#__PURE__*/React.createElement(\"h6\",null,state?state.followers.length:\"0\",\" Followers\"),/*#__PURE__*/React.createElement(\"h6\",null,state?state.following.length:\"0\",\" Following\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"file-field input-field\",style:{margin:\"30px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"btn\"},/*#__PURE__*/React.createElement(\"span\",null,\"Update Picture\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:function onChange(e){updatePhoto(e.target.files[0]);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"file-path-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"file-path validate\",type:\"text\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"gallery\",style:{display:\"flex\",justifyContent:\"space-around\",flexWrap:\"wrap\"}},allpics.map(function(item){return/*#__PURE__*/React.createElement(\"img\",{key:item._id,className:\"galleryItem\",src:item.photo,alt:item.title});})));}export default Myprofile;","map":{"version":3,"sources":["D:/Project/Picture Gallery/Frontend/picgallery/src/Component/Pages/myprofile.js"],"names":["React","useEffect","useState","useContext","UserContext","Myprofile","allpics","setPics","state","dispatch","image","setImage","fetch","headers","localStorage","getItem","then","res","json","result","console","log","mypost","data","FormData","append","method","body","JSON","stringify","pic","url","setItem","type","payload","catch","err","updatePhoto","file","maxWidth","margin","borderBottom","display","justifyContent","width","height","borderRadius","name","length","followers","following","e","target","files","flexWrap","map","item","_id","photo","title"],"mappings":"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","sourcesContent":["import React,{useEffect, useState, useContext} from 'react'\r\nimport { UserContext } from '../../App'\r\n\r\nfunction Myprofile() {\r\n    const [allpics, setPics]=useState([])\r\n    const {state, dispatch} = useContext(UserContext)\r\n    const [image, setImage] = useState('')\r\n    // const [url, setUrl]=useState(\"\")\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:1000/mypost',{\r\n            headers:{\r\n                \"Authorization\":\"Hello \" +localStorage.getItem(\"jwt\")\r\n            }\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            setPics(result.mypost)\r\n        })\r\n    }, [])\r\n    \r\n    useEffect(()=>{ \r\n        if (image){\r\n            const data = new FormData()\r\n            data.append(\"file\", image)\r\n            data.append(\"upload_preset\", \"Picture gallery\")\r\n            data.append(\"cloud_name\", \"siddtechbadal\")\r\n            fetch(\"https://api.cloudinary.com/v1_1/siddtechbadal/image/upload\",{\r\n                method:\"post\",\r\n                body:data\r\n            }).then(res=>res.json())\r\n            .then(data=>{\r\n                fetch(\"http://localhost:1000/updatepic\",{\r\n                    method:\"put\",\r\n                    headers:{\r\n                        \"Content-Type\":\"application/json\",\r\n                        \"Authorization\":\"Hello \" +localStorage.getItem(\"jwt\")\r\n                    },\r\n                    body:JSON.stringify({\r\n                        pic:data.url\r\n                    })\r\n                }).then(res=>res.json())\r\n                .then(result=>{\r\n                    console.log(result)\r\n                    localStorage.setItem(\"user\",JSON.stringify({...state, pic:result.pic}))\r\n                    dispatch({type:\"UPDATEPIC\", payload:result.pic})\r\n                })\r\n            }).catch(err=>{\r\n                console.log(err)\r\n            })\r\n        }\r\n    },[image])\r\n\r\n    const updatePhoto = (file) => {\r\n        setImage(file)\r\n    }    \r\n\r\n    return (\r\n        <div style={{maxWidth:\"600px\", margin:'10px auto'}}>\r\n            <div style={{ margin:\"20px 20px\", borderBottom:\"1px solid grey\"}}>            \r\n                <div style={{display:\"flex\", justifyContent:\"space-around\"}}>\r\n                    <div>\r\n                        <img style={{width:'160px',height:\"160px\",borderRadius:\"80px\"}} src={state?state.pic:\"loading\"} />\r\n                    </div>\r\n                    <div>\r\n                        <h4>{state?state.name:\"loading\" }</h4>\r\n                        <div style={{display:\"flex\", justifyContent:\"space-between\", width:\"110%\"}}>\r\n                            <h6>{allpics.length} Post</h6>\r\n                            <h6>{state?state.followers.length:\"0\"} Followers</h6>\r\n                            <h6>{state?state.following.length:\"0\"} Following</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"file-field input-field\" style={{margin:\"30px\"}}>\r\n                    <div className=\"btn\">\r\n                        <span>Update Picture</span>\r\n                        <input type=\"file\"  onChange={(e)=>{updatePhoto(e.target.files[0])}} />\r\n                    </div>\r\n                    <div className=\"file-path-wrapper\">\r\n                        <input className=\"file-path validate\" type=\"text\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"gallery\" style={{display:\"flex\", justifyContent:\"space-around\", flexWrap:\"wrap\"}}>\r\n                {\r\n                    allpics.map(item=>{\r\n                        return(\r\n                            <img key={item._id} className=\"galleryItem\" src={item.photo} alt={item.title} />\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Myprofile"]},"metadata":{},"sourceType":"module"}