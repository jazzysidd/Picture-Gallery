{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import{UserContext}from'../../App';import{useParams}from\"react-router-dom\";function Userprofile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userProfile=_useState2[0],setProfile=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useParams=useParams(),userid=_useParams.userid;var _useState3=useState(state?!state.following.includes(userid):true),_useState4=_slicedToArray(_useState3,2),setFollow=_useState4[0],setShowFollow=_useState4[1];useEffect(function(){fetch(\"http://localhost:1000/user/\".concat(userid),{headers:{\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setProfile(result);});},[]);var followUser=function followUser(){fetch(\"http://localhost:1000/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userid})}).then(function(res){return res.json();}).then(function(data){dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}});localStorage.setItem(\"user\",JSON.stringify(data));setProfile(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{followers:[].concat(_toConsumableArray(prevState.user.followers),[data._id])})});});setShowFollow(false);console.log(data);});};var unfollowUser=function unfollowUser(){fetch(\"http://localhost:1000/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({unfollowId:userid})}).then(function(res){return res.json();}).then(function(data){dispatch({type:\"UPDATE\",payload:{following:data.following,followers:data.followers}});localStorage.setItem(\"user\",JSON.stringify(data));setProfile(function(prevState){var newFollower=prevState.user.followers.filter(function(item){return item!=data._id;});return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{followers:newFollower})});});setShowFollow(true);console.log(data);});};return/*#__PURE__*/React.createElement(React.Fragment,null,userProfile?/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:\"600px\",margin:'10px auto'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\",margin:\"20px 20px\",borderBottom:\"1px solid grey\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{style:{width:'160px',height:\"160px\",borderRadius:\"80px\"},src:userProfile.user.pic})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,userProfile.user.name),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"110%\"}},/*#__PURE__*/React.createElement(\"h6\",null,userProfile.posts.length,\" Post\"),/*#__PURE__*/React.createElement(\"h6\",null,userProfile.user.followers.length,\" Followers\"),/*#__PURE__*/React.createElement(\"h6\",null,userProfile.user.following.length,\" Following\")),setFollow?/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light\",type:\"submit\",onClick:function onClick(){return followUser();}},\"Follow\"):/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light\",type:\"submit\",onClick:function onClick(){return unfollowUser();}},\"UnFollow\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"gallery\",style:{display:\"flex\",justifyContent:\"space-around\",flexWrap:\"wrap\"}},userProfile.posts.map(function(item){return/*#__PURE__*/React.createElement(\"img\",{key:item._id,className:\"galleryItem\",src:item.photo,alt:item.title});}))):/*#__PURE__*/React.createElement(\"h2\",null,\"loading!...\"));}export default Userprofile;","map":{"version":3,"sources":["D:/Project/Picture Gallery/Frontend/picgallery/src/Component/Pages/userPrfile.js"],"names":["React","useEffect","useState","useContext","UserContext","useParams","Userprofile","userProfile","setProfile","state","dispatch","userid","following","includes","setFollow","setShowFollow","fetch","headers","localStorage","getItem","then","res","json","result","console","log","followUser","method","body","JSON","stringify","followId","data","type","payload","followers","setItem","prevState","user","_id","unfollowUser","unfollowId","newFollower","filter","item","maxWidth","margin","display","justifyContent","borderBottom","width","height","borderRadius","pic","name","posts","length","flexWrap","map","photo","title"],"mappings":"ihBAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAyBC,QAAzB,CAAmCC,UAAnC,KAAoD,OAApD,CACA,OAASC,WAAT,KAA4B,WAA5B,CACA,OAAQC,SAAR,KAAwB,kBAAxB,CAEA,QAASC,CAAAA,WAAT,EAAuB,eACaJ,QAAQ,CAAC,IAAD,CADrB,wCACZK,WADY,eACCC,UADD,+BAEOL,UAAU,CAACC,WAAD,CAFjB,CAEZK,KAFY,aAEZA,KAFY,CAELC,QAFK,aAELA,QAFK,gBAGFL,SAAS,EAHP,CAGZM,MAHY,YAGZA,MAHY,gBAIgBT,QAAQ,CAACO,KAAK,CAAC,CAACA,KAAK,CAACG,SAAN,CAAgBC,QAAhB,CAAyBF,MAAzB,CAAF,CAAmC,IAAzC,CAJxB,yCAIZG,SAJY,eAIDC,aAJC,eAKnBd,SAAS,CAAC,UAAM,CACZe,KAAK,sCAA+BL,MAA/B,EAAwC,CACzCM,OAAO,CAAC,CACJ,gBAAgB,SAAUC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADtB,CADiC,CAAxC,CAAL,CAIGC,IAJH,CAIQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAJX,EAKCF,IALD,CAKM,SAAAG,MAAM,CAAE,CACVC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAf,UAAU,CAACe,MAAD,CAAV,CACH,CARD,EASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAK,CACpBV,KAAK,CAAC,8BAAD,CAAgC,CACjCW,MAAM,CAAC,KAD0B,CAEjCV,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,SAASC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFrB,CAFyB,CAMjCS,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBC,QAAQ,CAACpB,MADO,CAAf,CAN4B,CAAhC,CAAL,CASGS,IATH,CASQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EATX,EAUCF,IAVD,CAUM,SAAAY,IAAI,CAAE,CACRtB,QAAQ,CAAC,CAACuB,IAAI,CAAC,QAAN,CAAgBC,OAAO,CAAC,CAACtB,SAAS,CAACoB,IAAI,CAACpB,SAAhB,CAA2BuB,SAAS,CAACH,IAAI,CAACG,SAA1C,CAAxB,CAAD,CAAR,CACAjB,YAAY,CAACkB,OAAb,CAAqB,MAArB,CAA4BP,IAAI,CAACC,SAAL,CAAeE,IAAf,CAA5B,EACAxB,UAAU,CAAC,SAAC6B,SAAD,CAAa,CACpB,sCACOA,SADP,MAEIC,IAAI,gCAAKD,SAAS,CAACC,IAAf,MACAH,SAAS,8BAAKE,SAAS,CAACC,IAAV,CAAeH,SAApB,GAA8BH,IAAI,CAACO,GAAnC,EADT,EAFR,GAMH,CAPS,CAAV,CAQAxB,aAAa,CAAC,KAAD,CAAb,CACAS,OAAO,CAACC,GAAR,CAAYO,IAAZ,EACH,CAvBD,EAwBH,CAzBD,CA2BA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAK,CACtBxB,KAAK,CAAC,gCAAD,CAAkC,CACnCW,MAAM,CAAC,KAD4B,CAEnCV,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,SAASC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFrB,CAF2B,CAMnCS,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBW,UAAU,CAAC9B,MADK,CAAf,CAN8B,CAAlC,CAAL,CASGS,IATH,CASQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EATX,EAUCF,IAVD,CAUM,SAAAY,IAAI,CAAE,CACRtB,QAAQ,CAAC,CAACuB,IAAI,CAAC,QAAN,CAAgBC,OAAO,CAAC,CAACtB,SAAS,CAACoB,IAAI,CAACpB,SAAhB,CAA2BuB,SAAS,CAACH,IAAI,CAACG,SAA1C,CAAxB,CAAD,CAAR,CACAjB,YAAY,CAACkB,OAAb,CAAqB,MAArB,CAA4BP,IAAI,CAACC,SAAL,CAAeE,IAAf,CAA5B,EACAxB,UAAU,CAAC,SAAC6B,SAAD,CAAa,CACpB,GAAMK,CAAAA,WAAW,CAAGL,SAAS,CAACC,IAAV,CAAeH,SAAf,CAAyBQ,MAAzB,CAAgC,SAAAC,IAAI,QAAEA,CAAAA,IAAI,EAAIZ,IAAI,CAACO,GAAf,EAApC,CAApB,CACA,sCACOF,SADP,MAEIC,IAAI,gCAAKD,SAAS,CAACC,IAAf,MACAH,SAAS,CAACO,WADV,EAFR,GAMH,CARS,CAAV,CASA3B,aAAa,CAAC,IAAD,CAAb,CACAS,OAAO,CAACC,GAAR,CAAYO,IAAZ,EACH,CAxBD,EAyBH,CA1BD,CA4BA,mBACI,wCACCzB,WAAW,cACZ,2BAAK,KAAK,CAAE,CAACsC,QAAQ,CAAC,OAAV,CAAmBC,MAAM,CAAC,WAA1B,CAAZ,eACI,2BAAK,KAAK,CAAE,CAACC,OAAO,CAAC,MAAT,CAAiBC,cAAc,CAAC,cAAhC,CAAgDF,MAAM,CAAC,WAAvD,CAAoEG,YAAY,CAAC,gBAAjF,CAAZ,eACI,4CACI,2BAAK,KAAK,CAAE,CAACC,KAAK,CAAC,OAAP,CAAeC,MAAM,CAAC,OAAtB,CAA8BC,YAAY,CAAC,MAA3C,CAAZ,CAAgE,GAAG,CAAE7C,WAAW,CAAC+B,IAAZ,CAAiBe,GAAtF,EADJ,CADJ,cAII,4CACI,8BAAK9C,WAAW,CAAC+B,IAAZ,CAAiBgB,IAAtB,CADJ,cAEI,2BAAK,KAAK,CAAE,CAACP,OAAO,CAAC,MAAT,CAAiBC,cAAc,CAAC,eAAhC,CAAiDE,KAAK,CAAC,MAAvD,CAAZ,eACI,8BAAK3C,WAAW,CAACgD,KAAZ,CAAkBC,MAAvB,SADJ,cAEI,8BAAKjD,WAAW,CAAC+B,IAAZ,CAAiBH,SAAjB,CAA2BqB,MAAhC,cAFJ,cAGI,8BAAKjD,WAAW,CAAC+B,IAAZ,CAAiB1B,SAAjB,CAA2B4C,MAAhC,cAHJ,CAFJ,CAOK1C,SAAS,cACV,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,IAAI,CAAC,QAAtD,CAA+D,OAAO,CAAE,yBAAIY,CAAAA,UAAU,EAAd,EAAxE,WADU,cAGV,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,IAAI,CAAC,QAAtD,CAA+D,OAAO,CAAE,yBAAIc,CAAAA,YAAY,EAAhB,EAAxE,aAVJ,CAJJ,CADJ,cAoBI,2BAAK,SAAS,CAAC,SAAf,CAAyB,KAAK,CAAE,CAACO,OAAO,CAAC,MAAT,CAAiBC,cAAc,CAAC,cAAhC,CAAgDS,QAAQ,CAAC,MAAzD,CAAhC,EAEQlD,WAAW,CAACgD,KAAZ,CAAkBG,GAAlB,CAAsB,SAAAd,IAAI,CAAE,CACxB,mBACI,2BAAK,GAAG,CAAEA,IAAI,CAACL,GAAf,CAAoB,SAAS,CAAC,aAA9B,CAA4C,GAAG,CAAEK,IAAI,CAACe,KAAtD,CAA6D,GAAG,CAAEf,IAAI,CAACgB,KAAvE,EADJ,CAGH,CAJD,CAFR,CApBJ,CADY,cAgCV,4CAjCF,CADJ,CAsCH,CAED,cAAetD,CAAAA,WAAf","sourcesContent":["import React,{useEffect, useState, useContext} from 'react'\r\nimport { UserContext } from '../../App'\r\nimport {useParams} from \"react-router-dom\"\r\n\r\nfunction Userprofile() {\r\n    const [userProfile, setProfile]=useState(null)\r\n    const {state, dispatch} = useContext(UserContext)\r\n    const {userid} = useParams()\r\n    const [setFollow, setShowFollow] = useState(state?!state.following.includes(userid):true)\r\n    useEffect(() => {\r\n        fetch(`http://localhost:1000/user/${userid}`,{\r\n            headers:{  \r\n                \"Authorization\":\"Hello \" +localStorage.getItem(\"jwt\")\r\n            }\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            console.log(result)\r\n            setProfile(result)\r\n        })\r\n    }, [])\r\n\r\n    const followUser = () =>{\r\n        fetch(\"http://localhost:1000/follow\",{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                followId:userid\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n            dispatch({type:\"UPDATE\", payload:{following:data.following, followers:data.followers}}) \r\n            localStorage.setItem(\"user\",JSON.stringify(data))\r\n            setProfile((prevState)=>{\r\n                return{\r\n                    ...prevState,\r\n                    user:{...prevState.user,\r\n                        followers:[...prevState.user.followers,data._id]\r\n                    }\r\n                }\r\n            })\r\n            setShowFollow(false)\r\n            console.log(data)\r\n        })\r\n    }\r\n\r\n    const unfollowUser = () =>{\r\n        fetch(\"http://localhost:1000/unfollow\",{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                unfollowId:userid\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n            dispatch({type:\"UPDATE\", payload:{following:data.following, followers:data.followers}}) \r\n            localStorage.setItem(\"user\",JSON.stringify(data))\r\n            setProfile((prevState)=>{\r\n                const newFollower = prevState.user.followers.filter(item=>item != data._id)\r\n                return{\r\n                    ...prevState,\r\n                    user:{...prevState.user,\r\n                        followers:newFollower\r\n                    }\r\n                }\r\n            })\r\n            setShowFollow(true)\r\n            console.log(data)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {userProfile ?\r\n        <div style={{maxWidth:\"600px\", margin:'10px auto'}}>\r\n            <div style={{display:\"flex\", justifyContent:\"space-around\", margin:\"20px 20px\", borderBottom:\"1px solid grey\"}}>\r\n                <div>\r\n                    <img style={{width:'160px',height:\"160px\",borderRadius:\"80px\"}} src={userProfile.user.pic} />\r\n                </div>\r\n                <div>\r\n                    <h4>{userProfile.user.name }</h4>\r\n                    <div style={{display:\"flex\", justifyContent:\"space-between\", width:\"110%\"}}>\r\n                        <h6>{userProfile.posts.length} Post</h6>\r\n                        <h6>{userProfile.user.followers.length} Followers</h6>\r\n                        <h6>{userProfile.user.following.length} Following</h6>\r\n                    </div>\r\n                    {setFollow?\r\n                    <button className=\"btn waves-effect waves-light\" type=\"submit\" onClick={()=>followUser()}>Follow</button>\r\n                    :\r\n                    <button className=\"btn waves-effect waves-light\" type=\"submit\" onClick={()=>unfollowUser()}>UnFollow</button>                \r\n                    }\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"gallery\" style={{display:\"flex\", justifyContent:\"space-around\", flexWrap:\"wrap\"}}>\r\n                {\r\n                    userProfile.posts.map(item=>{\r\n                        return(\r\n                            <img key={item._id} className=\"galleryItem\" src={item.photo} alt={item.title} />\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        </div>   \r\n\r\n        : <h2>loading!...</h2>}\r\n        \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Userprofile"]},"metadata":{},"sourceType":"module"}