{"ast":null,"code":"import _slicedToArray from\"D:\\\\Project\\\\Picture Gallery\\\\Frontend\\\\picgallery\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import M from\"materialize-css\";import{useHistory}from'react-router-dom';function CreatePost(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];var history=useHistory('');useEffect(function(){if(url){fetch(\"http://localhost:1000/createpost\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Hello \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,picUrl:url})}).then(function(res){return res.json();}).then(function(data){if(data.err){M.toast({html:data.err,classes:\"#f44336 red\"});}else{M.toast({html:\"Pic Uploaded\",classes:'#00bfa5 teal accent-4'});history.push(\"/\");}});}},[url]);var PostPicture=function PostPicture(){var data=new FormData();data.append('file',image);data.append('upload_preset',\"Picture gallery\");data.append('cloud_name','siddtechbadal');fetch(\"\thttps://api.cloudinary.com/v1_1/siddtechbadal/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);console.log(data);}).catch(function(err){console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"card input-field\",style:{margin:'50px auto',maxWidth:\"500px\",padding:\"20px\"}},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();PostPicture();}},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"title\"},\"Title\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"body\"},\"Body\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){setBody(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"file-field input-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn\"},/*#__PURE__*/React.createElement(\"span\",null,\"Select Picture\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:function onChange(e){setImage(e.target.files[0]);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"file-path-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"file-path validate\",type:\"text\"}))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light\",type:\"submit\"},\"Upload\")));}export default CreatePost;","map":{"version":3,"sources":["D:/Project/Picture Gallery/Frontend/picgallery/src/Component/Pages/CreatePost.js"],"names":["React","useState","useEffect","M","useHistory","CreatePost","title","setTitle","body","setBody","image","setImage","url","setUrl","history","fetch","method","headers","localStorage","getItem","JSON","stringify","picUrl","then","res","json","data","err","toast","html","classes","push","PostPicture","FormData","append","console","log","catch","margin","maxWidth","padding","e","preventDefault","target","value","files"],"mappings":"8KAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CAEA,QAASC,CAAAA,UAAT,EAAsB,eACQJ,QAAQ,CAAC,EAAD,CADhB,wCACXK,KADW,eACJC,QADI,8BAEMN,QAAQ,CAAC,EAAD,CAFd,yCAEXO,IAFW,eAELC,OAFK,8BAGQR,QAAQ,CAAC,EAAD,CAHhB,yCAGXS,KAHW,eAGJC,QAHI,8BAIEV,QAAQ,CAAC,EAAD,CAJV,yCAIXW,GAJW,eAINC,MAJM,eAKlB,GAAMC,CAAAA,OAAO,CAAGV,UAAU,CAAC,EAAD,CAA1B,CAEAF,SAAS,CAAC,UAAM,CACZ,GAAIU,GAAJ,CAAQ,CACJG,KAAK,CAAC,kCAAD,CAAoC,CACzCC,MAAM,CAAC,MADkC,CAEzCC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,SAAWC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFvB,CAFiC,CAMzCX,IAAI,CAACY,IAAI,CAACC,SAAL,CAAe,CAChBf,KAAK,CAALA,KADgB,CAEhBE,IAAI,CAAJA,IAFgB,CAGhBc,MAAM,CAACV,GAHS,CAAf,CANoC,CAApC,CAAL,CAWDW,IAXC,CAWI,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAXP,EAYHF,IAZG,CAYE,SAAAG,IAAI,CAAE,CACR,GAAIA,IAAI,CAACC,GAAT,CAAa,CACTxB,CAAC,CAACyB,KAAF,CAAQ,CAACC,IAAI,CAACH,IAAI,CAACC,GAAX,CAAeG,OAAO,CAAC,aAAvB,CAAR,EACH,CAFD,IAEK,CACD3B,CAAC,CAACyB,KAAF,CAAQ,CAACC,IAAI,CAAC,cAAN,CAAsBC,OAAO,CAAC,uBAA9B,CAAR,EACAhB,OAAO,CAACiB,IAAR,CAAa,GAAb,EACH,CACJ,CAnBG,EAoBH,CACJ,CAvBQ,CAuBN,CAACnB,GAAD,CAvBM,CAAT,CAyBA,GAAMoB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAMN,CAAAA,IAAI,CAAG,GAAIO,CAAAA,QAAJ,EAAb,CACAP,IAAI,CAACQ,MAAL,CAAY,MAAZ,CAAmBxB,KAAnB,EACAgB,IAAI,CAACQ,MAAL,CAAY,eAAZ,CAA4B,iBAA5B,EACAR,IAAI,CAACQ,MAAL,CAAY,YAAZ,CAAyB,eAAzB,EAEAnB,KAAK,CAAC,6DAAD,CAA+D,CAChEC,MAAM,CAAC,MADyD,CAEhER,IAAI,CAACkB,IAF2D,CAA/D,CAAL,CAGGH,IAHH,CAGQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAHX,EAICF,IAJD,CAIM,SAAAG,IAAI,CAAE,CACRb,MAAM,CAACa,IAAI,CAACd,GAAN,CAAN,CACAuB,OAAO,CAACC,GAAR,CAAYV,IAAZ,EACH,CAPD,EAOGW,KAPH,CAOS,SAAAV,GAAG,CAAE,CACVQ,OAAO,CAACC,GAAR,CAAYT,GAAZ,EACH,CATD,EAUH,CAhBD,CAkBA,mBACI,2BAAK,SAAS,CAAC,kBAAf,CAAkC,KAAK,CAAE,CAACW,MAAM,CAAC,WAAR,CAAqBC,QAAQ,CAAC,OAA9B,CAAuCC,OAAO,CAAC,MAA/C,CAAzC,eACI,4BAAM,QAAQ,CAAE,kBAACC,CAAD,CAAK,CAACA,CAAC,CAACC,cAAF,GAAmBV,WAAW,GAAG,CAAvD,eACI,6BAAO,OAAO,CAAC,OAAf,UADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,KAAK,CAAE1B,KAA9C,CAAqD,QAAQ,CAAE,kBAACmC,CAAD,QAAKlC,CAAAA,QAAQ,CAACkC,CAAC,CAACE,MAAF,CAASC,KAAV,CAAb,EAA/D,EAFJ,cAGI,6BAAO,OAAO,CAAC,MAAf,SAHJ,cAII,6BAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,MAA/B,CAAsC,KAAK,CAAEpC,IAA7C,CAAmD,QAAQ,CAAE,kBAACiC,CAAD,CAAK,CAAChC,OAAO,CAACgC,CAAC,CAACE,MAAF,CAASC,KAAV,CAAP,CAAwB,CAA3F,EAJJ,cAKI,2BAAK,SAAS,CAAC,wBAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,iDADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAoB,QAAQ,CAAE,kBAACH,CAAD,CAAK,CAAC9B,QAAQ,CAAC8B,CAAC,CAACE,MAAF,CAASE,KAAT,CAAe,CAAf,CAAD,CAAR,CAA4B,CAAhE,EAFJ,CADJ,cAKI,2BAAK,SAAS,CAAC,mBAAf,eACI,6BAAO,SAAS,CAAC,oBAAjB,CAAsC,IAAI,CAAC,MAA3C,EADJ,CALJ,CALJ,cAcI,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,IAAI,CAAC,QAAtD,WAdJ,CADJ,CADJ,CAqBH,CAED,cAAexC,CAAAA,UAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport M from \"materialize-css\"\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nfunction CreatePost() {\r\n    const [title, setTitle] = useState('')\r\n    const [body, setBody] = useState('')\r\n    const [image, setImage] = useState('')\r\n    const [url, setUrl]=useState(\"\")\r\n    const history = useHistory('')\r\n\r\n    useEffect(() => {\r\n        if (url){\r\n            fetch(\"http://localhost:1000/createpost\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Hello \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                title,\r\n                body,\r\n                picUrl:url\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n            if (data.err){\r\n                M.toast({html:data.err,classes:\"#f44336 red\"})\r\n            }else{\r\n                M.toast({html:\"Pic Uploaded\", classes:'#00bfa5 teal accent-4'})\r\n                history.push(\"/\")\r\n            }\r\n        })\r\n        }\r\n    }, [url])\r\n    \r\n    const PostPicture = () => {\r\n        const data = new FormData()\r\n        data.append('file',image)\r\n        data.append('upload_preset',\"Picture gallery\")\r\n        data.append('cloud_name','siddtechbadal')\r\n        \r\n        fetch(\"\thttps://api.cloudinary.com/v1_1/siddtechbadal/image/upload\",{\r\n            method:\"post\",\r\n            body:data\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n            setUrl(data.url)\r\n            console.log(data)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    \r\n    return (\r\n        <div className=\"card input-field\" style={{margin:'50px auto', maxWidth:\"500px\", padding:\"20px\"}}>\r\n            <form onSubmit={(e)=>{e.preventDefault();PostPicture()}}>\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input type=\"text\" placeholder=\"title\" value={title} onChange={(e)=>setTitle(e.target.value)} />\r\n                <label htmlFor=\"body\">Body</label>\r\n                <input type=\"text\" placeholder=\"body\" value={body} onChange={(e)=>{setBody(e.target.value)}} />\r\n                <div className=\"file-field input-field\">\r\n                    <div className=\"btn\">\r\n                        <span>Select Picture</span>\r\n                        <input type=\"file\"  onChange={(e)=>{setImage(e.target.files[0])}} />\r\n                    </div>\r\n                    <div className=\"file-path-wrapper\">\r\n                        <input className=\"file-path validate\" type=\"text\" />\r\n                    </div>\r\n                </div>\r\n                <button className=\"btn waves-effect waves-light\" type=\"submit\">Upload</button>  \r\n            </form>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreatePost"]},"metadata":{},"sourceType":"module"}